<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<title>Painel Master - FAD</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
@font-face {
  font-family: 'Amazone BT';
  src: url('/static/fonts/amazone-bt.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

.btn-icone {
  background-color: transparent;
  color: #003366;
  border: 1px solid #003366;
  border-radius: 4px;
  padding: 6px 10px;
  font-size: 18px;
  transition: all 0.3s ease;
  margin: 0 2px;
  cursor: pointer;
  min-width: 36px;
  min-height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.btn-icone:hover {
  background-color: #e3f2fd;
  color: #001a33;
  border-color: #001a33;
}
.btn-icone.selecionado {
  background-color: #cbe4f9;
  color: #003366;
  border-color: #003366;
}
</style>
<script>
    // Fun√ß√µes utilit√°rias para formata√ß√£o
    function formatarCPF(cpf) {
      if (!cpf) return '';
      cpf = cpf.replace(/\D/g, '');
      return cpf.length === 11 ? cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4') : cpf;
    }
    function formatarCNPJ(cnpj) {
      if (!cnpj) return '';
      cnpj = cnpj.replace(/\D/g, '');
      return cnpj.length === 14 ? cnpj.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, '$1.$2.$3/$4-$5') : cnpj;
    }
    function formatarTelefone(tel) {
      if (!tel) return '';
      tel = tel.replace(/\D/g, '');
      if (tel.length === 11) return tel.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
      if (tel.length === 10) return tel.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
      return tel;
    }
    function formatarCEP(cep) {
      if (!cep) return '';
      cep = cep.replace(/\D/g, '');
      return cep.length === 8 ? cep.replace(/(\d{5})(\d{3})/, '$1-$2') : cep;
    }
    function formatarEmail(email) {
      if (!email) return '';
      return email.trim().toLowerCase();
    }
    function formatarDataHora(dataStr) {
      if (!dataStr) return '';
      const data = new Date(dataStr);
      if (isNaN(data.getTime())) return dataStr;
      const pad = n => n.toString().padStart(2, '0');
      return `${pad(data.getDate())}/${pad(data.getMonth()+1)}/${pad(data.getFullYear())} ${pad(data.getHours())}:${pad(data.getMinutes())}:${pad(data.getSeconds())}`;
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Carregar Usu√°rios Comuns
      fetch("/painel/analista/usuarios")
        .then(res => res.json())
        .then(usuarios => {
          const tabelaUsuarios = document.getElementById("tabela-usuarios");
          tabelaUsuarios.innerHTML = "";
          usuarios.forEach(usuario => {
            const linha = document.createElement("tr");
            linha.innerHTML = `
              <td>${usuario.id}</td>
              <td>${usuario.nome}</td>
              <td>${formatarCPF(usuario.cpf)}</td>
              <td>${formatarEmail(usuario.email)}</td>
              <td>${formatarTelefone(usuario.telefone) || ''}</td>
              <td>${usuario.pessoa_fisica_id || ''}</td>
              <td>${usuario.instituicao || ''}</td>
              <td>${usuario.tipo_lotacao || ''}</td>
              <td>${formatarEmail(usuario.email_institucional) || ''}</td>
              <td>${formatarTelefone(usuario.telefone_institucional) || ''}</td>
              <td>${usuario.ramal || ''}</td>
              <td>${usuario.sede_hierarquia || ''}</td>
              <td>${usuario.sede_coordenadoria || ''}</td>
              <td>${usuario.sede_setor || ''}</td>
              <td>${usuario.sede_assistencia || ''}</td>
              <td>${usuario.regional_nome || ''}</td>
              <td>${usuario.regional_coordenadoria || ''}</td>
              <td>${usuario.regional_setor || ''}</td>
              <td>${formatarDataHora(usuario.criado_em) || ''}</td>
              <td>${formatarDataHora(usuario.aprovado_em) || ''}</td>
              <td>${usuario.aprovador_id || ''}</td>
              <td><span class="status-badge ${usuario.status === 'aprovado' ? 'status-aprovado' : usuario.status === 'reprovado' ? 'status-reprovado' : 'status-aguardando'}">${usuario.status}</span></td>
              <td><span class="ativo-badge ${usuario.ativo ? 'ativo-sim' : 'ativo-nao'}">${usuario.ativo ? 'Sim' : 'N√£o'}</span></td>
              <td>
                <button class="btn-icone" title="Gerenciar Cadastro" onclick="gerenciarCadastro(${usuario.id})"><i class="fa-solid fa-id-card"></i></button>
                <button class="btn-icone" title="Gerenciar Acesso" onclick="gerenciarAcesso(${usuario.id})"><i class="fa-solid fa-key"></i></button>
                <button class="btn-icone" title="Ativar" onclick="ativarUsuario(${usuario.id})"><i class="fa-solid fa-user-check"></i></button>
              </td>
            `;
            tabelaUsuarios.appendChild(linha);
          });
        })
        .catch(error => console.error("Erro ao carregar usu√°rios:", error));

      // Carregar Administradores
      fetch("/painel/coordenador/usuarios")
        .then(res => res.json())
        .then(admins => {
          const tabelaAdmins = document.getElementById("tabela-admins");
          tabelaAdmins.innerHTML = "";
          admins.forEach(usuario => {
            const linha = document.createElement("tr");
            linha.innerHTML = `
              <td>${usuario.id}</td>
              <td>${usuario.nome}</td>
              <td>${formatarCPF(usuario.cpf)}</td>
              <td>${formatarEmail(usuario.email)}</td>
              <td>${formatarTelefone(usuario.telefone) || ''}</td>
              <td>${usuario.pessoa_fisica_id || ''}</td>
              <td>${usuario.instituicao || ''}</td>
              <td>${usuario.tipo_lotacao || ''}</td>
              <td>${formatarEmail(usuario.email_institucional) || ''}</td>
              <td>${formatarTelefone(usuario.telefone_institucional) || ''}</td>
              <td>${usuario.ramal || ''}</td>
              <td>${usuario.sede_hierarquia || ''}</td>
              <td>${usuario.sede_coordenadoria || ''}</td>
              <td>${usuario.sede_setor || ''}</td>
              <td>${usuario.sede_assistencia || ''}</td>
              <td>${usuario.regional_nome || ''}</td>
              <td>${usuario.regional_coordenadoria || ''}</td>
              <td>${usuario.regional_setor || ''}</td>
              <td>${formatarDataHora(usuario.criado_em) || ''}</td>
              <td>${formatarDataHora(usuario.aprovado_em) || ''}</td>
              <td>${usuario.aprovador_id || ''}</td>
              <td><span class="status-badge ${usuario.status === 'aprovado' ? 'status-aprovado' : usuario.status === 'reprovado' ? 'status-reprovado' : 'status-aguardando'}">${usuario.status}</span></td>
              <td><span class="ativo-badge ${usuario.ativo ? 'ativo-sim' : 'ativo-nao'}">${usuario.ativo ? 'Sim' : 'N√£o'}</span></td>
              <td>
                <button class="btn-icone" title="Aprovar" onclick="aprovarUsuario(${usuario.id})"><i class="fa-solid fa-circle-check"></i></button>
                <button class="btn-icone" title="Reprovar" onclick="reprovarUsuario(${usuario.id})"><i class="fa-solid fa-circle-xmark"></i></button>
                <button class="btn-icone" title="Ativar" onclick="ativarUsuario(${usuario.id})"><i class="fa-solid fa-user-check"></i></button>
              </td>
            `;
            tabelaAdmins.appendChild(linha);
          });
        })
        .catch(error => console.error("Erro ao carregar administradores:", error));

      // Carregar Projetos do Painel Master
      fetch("/painel/projetos")
        .then(res => res.json())
        .then(projetos => {
          const tabela = document.getElementById("tabela-projetos");
          tabela.innerHTML = "";
          projetos.forEach(p => {
            const linha = document.createElement("tr");
            linha.onclick = () => selecionarLinhaProjeto(linha, p["Id"]);
            linha.innerHTML = `
              <td>${p["Id"]}</td>
              <td>${p["Nome"]}</td>
              <td>${p["Interessado"]}</td>
              <td>${p["CNPJ"]}</td>
              <td>${p["Representante legal"]}</td>
              <td>${p["CPF"]}</td>
              <td>${p["E-mail"]}</td>
              <td>${p["Telefone"]}</td>
              <td>${p["Trecho"]}</td>
              <td>${p["Munic√≠pio/UF"]}</td>
              <td>${p["Extens√£o"]}</td>
              <td>${p["Extens√£o calculada"]}</td>
              <td>${p["Analista respons√°vel"]}</td>
              <td>${p["Criado em"]}</td>
              <td>${p["Situa√ß√£o do projeto"]}</td>
              <td>${p["Situa√ß√£o do upload"]}</td>
              <td>${p["Situa√ßao da geometria"]}</td>
              <td>${p["Validada em"]}</td>
              <td>${p["Situa√ßao da conformidade ambiental"]}</td>
              <td>${p["CA aprovada em"]}</td>
              <td>${p["Situa√ß√£o do IFM"]}</td>
              <td>${p["IFM trecho"]}</td>
              <td>${p["IFM aprovado em"]}</td>
              <td>${p["Situa√ß√£o do IFS"]}</td>
              <td>${p["IFS trecho"]}</td>
              <td>${p["IFS aprovado em"]}</td>
              <td>${p["Situa√ß√£o do IQI"]}</td>
              <td>${p["IQI trecho"]}</td>
              <td>${p["IQI aprovado em"]}</td>
            `;
            tabela.appendChild(linha);
          });
        })
        .catch(error => console.error("Erro ao carregar projetos:", error));


      const hoje = new Date();
      const opcoes = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const formatado = hoje.toLocaleDateString('pt-BR', opcoes);
      const elementoData = document.getElementById("data-hoje");
      if (elementoData) elementoData.textContent = `Hoje √© ${formatado}`;
    });

    let projetoSelecionadoId = null;

    function selecionarLinhaProjeto(linha, id) {
      document.querySelectorAll("#tabela-projetos tr").forEach(tr => tr.classList.remove("projeto-selecionado"));
      linha.classList.add("projeto-selecionado");
      projetoSelecionadoId = id;
    }

    document.getElementById("acao-visualizar").onclick = () => {
      if (projetoSelecionadoId) alert(`üîç Visualizar projeto ID ${projetoSelecionadoId}`);
      else alert("Selecione um projeto primeiro.");
    };

    document.getElementById("acao-inspecionar").onclick = () => {
      if (projetoSelecionadoId) alert(`üß™ Inspecionar projeto ID ${projetoSelecionadoId}`);
      else alert("Selecione um projeto primeiro.");
    };

    document.getElementById("acao-gerenciar").onclick = () => {
  if (projetoSelecionadoId) alert(`‚öôÔ∏è Gerenciar projeto ID ${projetoSelecionadoId}`);
  else alert("Selecione um projeto primeiro.");
};

    function gerenciarCadastro(id) {
      alert(`Abrir editor de cadastro do usu√°rio ID ${id}`);
    }

    function gerenciarAcesso(id) {
      alert(`Abrir painel de acesso do usu√°rio ID ${id}`);
    }

    function aprovarUsuario(id) {
      fetch(`/painel/coordenador/usuarios/aprovar/${id}`, { method: "POST" })
        .then(res => res.json())
        .then(() => {
          alert("Administrador aprovado com sucesso!");
          location.reload();
        })
        .catch(() => alert("Erro ao aprovar o administrador."));
    }

    function reprovarUsuario(id) {
      fetch(`/painel/coordenador/usuarios/reprovar/${id}`, { method: "POST" })
        .then(res => res.json())
        .then(() => {
          alert("Administrador reprovado com sucesso!");
          location.reload();
        })
        .catch(() => alert("Erro ao reprovar o administrador."));
    }

    function ativarUsuario(id) {
      fetch(`/painel-usuario/ativar/${id}`, { method: "POST" })
        .then(res => res.json())
        .then(() => {
          alert("Usu√°rio ativado com sucesso!");
          location.reload();
        })
        .catch(() => alert("Erro ao ativar o usu√°rio."));
    }
  </script>
<style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f2f5;
      overflow-y: auto;
    }

    /* === Cabe√ßalho institucional FAD === */
.hero {
  background: #004080;
  color: white;
  padding: 5px 20px 0px 20px;
  text-align: center;
}
.hero-content {
  display: flex;
  justify-content: center;
  align-items: center;
}
.logo-fad {
  max-width: 100%;
  height: auto;
  max-height: 170px;
  display: block;
  padding: 5px 20px 0px 20px;
}
.fad-header {
  position: relative;
  background-color: #004080;
  padding: 10px 0;
  text-align: center;
}
.fad-header .logo-fad {
  height: 180px;
  max-height: 220px;
  margin: 0 auto;
  display: block;
  cursor: pointer;
}
.logout button {
  background-color: #004080;
  color: #fff;
  border: 2px solid #fff;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  font-size: 16px;
  transition: background 0.2s, color 0.2s;
}
.logout button:hover {
  background-color: #0056b3;
  color: #fff;
  border-color: #fff;
}

    .boas-vindas {
      text-align: center;
      margin-top: 30px;
      margin-bottom: 20px;
      /* Removido font-family global para n√£o sobrescrever o padr√£o do sistema */
    }
    .boas-vindas h2 {
  font-family: 'Amazone BT', cursive, sans-serif !important;
  font-size: 55px !important;
  color: #003366;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
  margin-top: 10px;
}

    .menu-horizontal {
      margin-top: 10px;
      text-align: center;
      background-color: #006699;
      padding: 10px 0;
    }

    .menu-principal {
      list-style: none;
      padding: 0;
      margin: 0;
      display: inline-flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .menu-principal > li {
      position: relative;
    }

    .menu-principal > li > a {
      display: inline-block;
      padding: 10px 16px;
      background-color: transparent;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      border: 1px solid transparent;
      transition: all 0.3s;
    }

    .menu-principal > li > a:hover {
      border: 1px solid white;
      background-color: rgba(255,255,255,0.1);
    }

    .submenu, .submenu-lateral {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      list-style: none;
      padding: 0;
      margin: 0;
      border-radius: 6px;
      z-index: 1000;
    }

    .submenu {
      top: 100%;
      left: 0;
      min-width: 220px;
    }

    .submenu-lateral {
      top: 0;
      left: 100%;
      min-width: 220px;
    }

    .submenu li a, .submenu-lateral li a {
      display: block;
      padding: 10px;
      text-decoration: none;
      color: #003366;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    .submenu li:last-child a, .submenu-lateral li:last-child a {
      border-bottom: none;
    }

    .submenu li a:hover, .submenu-lateral li a:hover {
      background-color: #eef5ff;
    }

    .menu-dropdown:hover .submenu,
    .menu-subdropdown:hover .submenu-lateral {
      display: block;
    }

    .painel-container {
      display: block;
      width: 100%;
      max-width: 1600px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 0;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    h2 {
      color: #003366;
      text-align: center;
      font-size: 22px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
      font-size: 14px;
    }

    th {
      background-color: #003366;
      color: white;
    }

    .btn-acao {
      padding: 4px 8px;
      font-size: 12px;
      border-radius: 6px;
      border: 1px solid black;
      background-color: rgba(0, 0, 0, 0.03);
      cursor: pointer;
      margin: 2px;
      width: 120px;
      transition: background 0.3s ease;
    }

    .btn-acao:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
    .projeto-selecionado {
  background-color: #cbe4f9 !important;
  font-weight: bold;
  color: #003366 !important;
  border: 2px solid #003366 !important;
  }

  </style>
<style>
   html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f2f5;
      overflow-y: auto;
    }

    .painel-container {
      display: block;
      width: 100%;
      max-width: 1600px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 0;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    h2 {
      color: #003366;
      text-align: center;
      font-size: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
      font-size: 9px;
    }

    th {
      background-color: #003366;
      color: white;
    }

    .tabela-scroll {
      overflow-x: auto;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .tabela-scroll table {
      min-width: 1600px;
    }

    .projeto-selecionado {
      background-color: #cbe4f9 !important;
      font-weight: bold;
      color: #003366 !important;
      border: 2px solid #003366 !important;
    }

    #voltar-topo {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 999;
      font-size: 14px;
      padding: 10px 14px;
      border: none;
      border-radius: 50%;
      background-color: #003366;
      color: white;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      transition: background 0.3s ease;
    }

    #voltar-topo:hover {
      background-color: #cce6f6; color: #003366;
    }
  
td, th {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 160px;
}
  
.botao-icone {
  display: inline-block;
  width: 42px;
  height: 42px;
  margin: 10px;
  cursor: pointer;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: 28px 28px;
  border: 1px solid #ccc;
  border-radius: 6px;
  position: relative;
}
.botao-icone:hover {
  background-color: #f0f0f0;
  border-color: #888;
}
.botao-icone::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  display: none;
  z-index: 10;
}
.botao-icone:hover::after {
  display: block;
}
  
.botao-icone {
  display: inline-block;
  width: 42px;
  height: 42px;
  margin: 10px;
  cursor: pointer;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: 28px 28px;
  border: 1px solid #ccc;
  border-radius: 6px;
  position: relative;
  background-color: #ffffff;
}
.botao-icone:hover {
  background-color: #f0f0f0;
  border-color: #888;
}
.botao-icone::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  display: none;
  z-index: 10;
}
.botao-icone:hover::after {
  display: block;
}

.botao-grupo {
  background-color: #e0e0e0;
  padding: 6px 10px;
  border: 1px solid #bbb;
  border-radius: 4px;
  margin: 2px;
  cursor: pointer;
}
.botao-grupo.ativo {
  background-color: #bbb;
}
  
button[onclick^="alternarGrupo"] {
  transition: background 0.3s ease;
}
button[onclick^="alternarGrupo"].ativo {
  filter: brightness(85%);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
}
  </style>
<style>
.status-badge {
  font-weight: bold;
  padding: 2px 8px;
  border-radius: 6px;
  display: inline-block;
}
.status-aprovado {
  background: #b6fcb6;
  color: #006600;
}
.status-aguardando {
  background: #b6e0fc;
  color: #0055aa;
}
.status-reprovado {
  background: #fcbbbb;
  color: #a80000;
}
.ativo-badge {
  font-weight: bold;
  border-radius: 6px;
  padding: 2px 8px;
}
.ativo-sim {
  background: #b6fcb6;
  color: #006600;
}
.ativo-nao {
  color: #222;
}
</style>
</head>
<body>
<!-- Cabe√ßalho institucional FAD -->
<header class="fad-header">
  <div class="logout" style="position:absolute;top:10px;right:20px;z-index:10;">
    <form action="/login/logout" method="post">
      <button type="submit">Sair</button>
    </form>
  </div>
  <div style="text-align:center;">
    <img src="/static/images/fad_logo_banco_completo1.png"
         alt="FAD - Ferramenta de An√°lise Dinamizada"
         class="logo-fad"
         style="margin: 0 auto; display: block; cursor:pointer;"
         onclick="window.location.href='/'">
  </div>
</header>

<div style="text-align:center; margin-top: 24px; margin-bottom: 0;">
  <div class="painel-master-titulo" style="font-family: 'Segoe UI', sans-serif; font-size: 25px; color: #003366; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0;">PAINEL MASTER</div>
  <div class="boas-vindas">
  <h2>
    Bem-vindo(a), {{ usuario.nome.split(' ')[0] }}
  </h2>
  <h3 id="data-hoje" style="font-family: 'Segoe UI', sans-serif; font-size: 18px; color: #333; margin-bottom: 15px;"></h3>
</div>
</div>

<div class="menu-horizontal">
<ul class="menu-principal">
<li class="menu-dropdown">
<a href="#">Cadastrar ‚ñº</a>
<ul class="submenu">
<li class="menu-subdropdown">
<a href="#">Elemento Rodovi√°rio ‚ñ∏</a>
<ul class="submenu-lateral">
<li><a href="/geo-de-obra" rel="noopener noreferrer" target="_blank">Geo de Obra</a></li>
<li><a href="/cadastrar-trechos" rel="noopener noreferrer" target="_blank">Trechos Estadualiza√ß√£o</a></li>
</ul>
</li>
<li><a href="/pessoa-fisica" rel="noopener noreferrer" target="_blank">Pessoa F√≠sica</a></li>
<li><a href="/pessoa-juridica" rel="noopener noreferrer" target="_blank">Pessoa Jur√≠dica</a></li>
<li><a href="/projeto" rel="noopener noreferrer" target="_blank">Projeto</a></li>
<li><a href="/usuario" rel="noopener noreferrer" target="_blank">Usu√°rio</a></li>
</ul>
</li>
<li class="menu-dropdown">
<a href="#">Ferramentas ‚ñº</a>
<ul class="submenu">
<li><a href="https://vinicapanema.github.io/AHP_tool/" rel="noopener noreferrer" target="_blank">Calculadora AHP</a></li>
<li><a href="/conformidade" rel="noopener noreferrer" target="_blank">Conformidade Ambiental</a></li>
<li><a href="/geo-de-obra" rel="noopener noreferrer" target="_blank">Geo de Obra</a></li>
<li class="menu-subdropdown">
<a href="#">Estadualiza√ß√£o ‚ñ∏</a>
<ul class="submenu-lateral">
<li><a href="/favorabilidade-multicriterio" rel="noopener noreferrer" target="_blank">Favorabilidade Multicrit√©rio</a></li>
<li><a href="/favorabilidade-socioeconomica" rel="noopener noreferrer" target="_blank">Favorabilidade Socioecon√¥mica</a></li>
<li><a href="/favorabilidade-infraestrutural" rel="noopener noreferrer" target="_blank">Favorabilidade Infraestrutural</a></li>
</ul>
</li>
</ul>
</li>
<li class="link-scroll"><a href="#container-admin">Administradores</a></li>
<li class="link-scroll"><a href="#container-usuarios">Usu√°rios</a></li>
<li class="link-scroll"><a href="#container-projetos">Projetos</a></li>
</ul>
</div>
<div class="painel-container" id="container-admin">
  <h2>Administradores</h2>
  <div id="abas-admins" style="text-align:center;margin:20px 0;">
    <button id="btn-mostrar-tudo-admins" class="btn-icone" title="Mostrar Tudo"><i class="fa-solid fa-table-list"></i></button>
    <button id="btn-grupo-profissionais-admins" class="btn-icone" title="Profissionais"><i class="fa-solid fa-user-tie"></i></button>
    <button id="btn-grupo-sistema-admins" class="btn-icone" title="Sistema"><i class="fa-solid fa-gears"></i></button>
    <button id="btn-ocultar-tudo-admins" class="btn-icone" title="Ocultar Tudo"><i class="fa-solid fa-eye-slash"></i></button>
  </div>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th colspan="6" style="background:#e3f2fd; color:#003366; font-weight:bold;">Dados Pessoais</th>
          <th colspan="13" class="grupo-header grupo-profissionais-admins" id="grupo-profissionais-admins" style="background:#e8f5e9; color:#003366; font-weight:bold;">Profissionais</th>
          <th colspan="5" class="grupo-header grupo-sistema-admins" id="grupo-sistema-admins" style="background:#fff8e1; color:#003366; font-weight:bold;">Sistema</th>
        </tr>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>CPF</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Pessoa F√≠sica ID</th>
          <th>Institui√ß√£o</th>
          <th>Tipo Lota√ß√£o</th>
          <th>Email Institucional</th>
          <th>Telefone Institucional</th>
          <th>Ramal</th>
          <th>Sede Hierarquia</th>
          <th>Sede Coordenadoria</th>
          <th>Sede Setor</th>
          <th>Sede Assist√™ncia</th>
          <th>Regional Nome</th>
          <th>Regional Coordenadoria</th>
          <th>Regional Setor</th>
          <th>Criado em</th>
          <th>Aprovado em</th>
          <th>Aprovador ID</th>
          <th>Status</th>
          <th>Ativo</th>
          <th>A√ß√£o</th>
        </tr>
      </thead>
      <tbody id="tabela-admins"></tbody>
    </table>
  </div>
  <!-- Removidos bot√µes editar, salvar, apagar -->
</div>

<div class="painel-container" id="container-usuarios">
  <h2>Usu√°rios Comuns</h2>
  <div id="abas-usuarios" style="text-align:center;margin:20px 0;">
    <button id="btn-mostrar-tudo-usuarios" class="btn-icone" title="Mostrar Tudo"><i class="fa-solid fa-table-list"></i></button>
    <button id="btn-grupo-profissionais-usuarios" class="btn-icone" title="Profissionais"><i class="fa-solid fa-user-tie"></i></button>
    <button id="btn-grupo-sistema-usuarios" class="btn-icone" title="Sistema"><i class="fa-solid fa-gears"></i></button>
    <button id="btn-ocultar-tudo-usuarios" class="btn-icone" title="Ocultar Tudo"><i class="fa-solid fa-eye-slash"></i></button>
  </div>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th colspan="6" style="background:#e3f2fd; color:#003366; font-weight:bold;">Dados Pessoais</th>
          <th colspan="13" class="grupo-header grupo-profissionais-usuarios" id="grupo-profissionais-usuarios" style="background:#e8f5e9; color:#003366; font-weight:bold;">Profissionais</th>
          <th colspan="5" class="grupo-header grupo-sistema-usuarios" id="grupo-sistema-usuarios" style="background:#fff8e1; color:#003366; font-weight:bold;">Sistema</th>
        </tr>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>CPF</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Pessoa F√≠sica ID</th>
          <th>Institui√ß√£o</th>
          <th>Tipo Lota√ß√£o</th>
          <th>Email Institucional</th>
          <th>Telefone Institucional</th>
          <th>Ramal</th>
          <th>Sede Hierarquia</th>
          <th>Sede Coordenadoria</th>
          <th>Sede Setor</th>
          <th>Sede Assist√™ncia</th>
          <th>Regional Nome</th>
          <th>Regional Coordenadoria</th>
          <th>Regional Setor</th>
          <th>Criado em</th>
          <th>Aprovado em</th>
          <th>Aprovador ID</th>
          <th>Status</th>
          <th>Ativo</th>
          <th>A√ß√£o</th>
        </tr>
      </thead>
      <tbody id="tabela-usuarios"></tbody>
    </table>
  </div>
  <!-- Removidos bot√µes editar, salvar, apagar -->
</div>

<div class="painel-container" id="container-projetos">
  <h2>Projetos</h2>
  <div id="abas-projetos" style="text-align:center;margin:20px 0;">
    <button id="btn-mostrar-tudo-projetos" class="btn-icone" title="Mostrar Tudo"><i class="fa-solid fa-table-list"></i></button>
    <button id="btn-grupo-geometria" onclick="alternarGrupoProjetos('geometria')" class="btn-icone" title="Geometria"><i class="fa-solid fa-draw-polygon"></i></button>
    <button id="btn-grupo-ca" onclick="alternarGrupoProjetos('ca')" class="btn-icone" title="Conformidade Ambiental (CA)"><i class="fa-solid fa-leaf"></i></button>
    <button id="btn-grupo-ifm" onclick="alternarGrupoProjetos('ifm')" class="btn-icone" title="Multicrit√©rio (IFM)"><i class="fa-solid fa-layer-group"></i></button>
    <button id="btn-grupo-ifs" onclick="alternarGrupoProjetos('ifs')" class="btn-icone" title="Socioecon√¥mico (IFS)"><i class="fa-solid fa-users"></i></button>
    <button id="btn-grupo-iqi" onclick="alternarGrupoProjetos('iqi')" class="btn-icone" title="Infraestrutural (IQI)"><i class="fa-solid fa-industry"></i></button>
    <button id="btn-esconder-tudo-projetos" class="btn-icone" title="Esconder Tudo"><i class="fa-solid fa-eye-slash"></i></button>
  </div>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th colspan="15" style="background-color: #003366; color: white;">
        Informa√ß√µes Gerais do Projeto
       </th>
          <th class="grupo-header grupo-geometria" colspan="3" id="grupo-geometria" style="background:#e0f7fa; font-weight:bold; color:#003;">
        Geometria
       </th>
          <th class="grupo-header grupo-ca" colspan="2" id="grupo-ca" style="background:#e8f5e9; font-weight:bold; color:#003;">
        Conformidade Ambiental (CA)
       </th>
          <th class="grupo-header grupo-ifm" colspan="3" id="grupo-ifm" style="background:#fff8e1; font-weight:bold; color:#003;">
        Favorabilidade Multicrit√©rio (IFM)
       </th>
          <th class="grupo-header grupo-ifs" colspan="3" id="grupo-ifs" style="background:#f3e5f5; font-weight:bold; color:#003;">
        Favorabilidade Socioecon√¥mica (IFS)
       </th>
          <th class="grupo-header grupo-iqi" colspan="3" id="grupo-iqi" style="background:#e0f2f1; font-weight:bold; color:#003;">
        Favorabilidade Infraestrutural (IQI)
       </th>
        </tr>
        <tr>
          <th style="background-color: #e3f2fd; color: #003366;">
        Id
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Nome
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Interessado
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        CNPJ
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Representante legal
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        CPF
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        E-mail
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Telefone
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Trecho
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Munic√≠pio / UF
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Extens√£o
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Extens√£o calculada
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Analista respons√°vel
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Criado em
       </th>
          <th style="background-color: #e3f2fd; color: #003366;">
        Situa√ß√£o do projeto
       </th>
          <th style="background:#e0f7fa; color:#003;">
        Situa√ß√£o do upload
       </th>
          <th style="background:#e0f7fa; color:#003;">
        Situa√ß√£o da geometria
       </th>
          <th style="background:#e0f7fa; color:#003;">
        Validada em
       </th>
          <th style="background:#e8f5e9; color:#003;">
        Situa√ß√£o da CA
       </th>
          <th style="background:#e8f5e9; color:#003;">
        CA aprovada em
       </th>
          <th style="background:#fff8e1; color:#003;">
        Situa√ß√£o do IFM
       </th>
          <th style="background:#fff8e1; color:#003;">
        IFM trecho
       </th>
          <th style="background:#fff8e1; color:#003;">
        IFM aprovado em
       </th>
          <th style="background:#f3e5f5; color:#003;">
        Situa√ß√£o do IFS
       </th>
          <th style="background:#f3e5f5; color:#003;">
        IFS trecho
       </th>
          <th style="background:#f3e5f5; color:#003;">
        IFS aprovado em
       </th>
          <th style="background:#e0f2f1; color:#003;">
        Situa√ß√£o do IQI
       </th>
          <th style="background:#e0f2f1; color:#003;">
        IQI trecho
       </th>
          <th style="background:#e0f2f1; color:#003;">
        IQI aprovado em
       </th>
        </tr>
      </thead>
      <tbody id="tabela-projetos">
      </tbody>
    </table>
  </div>
  <!-- Removidos bot√µes editar, salvar, apagar -->
</div>

<div class="painel-container" id="container-pessoa-fisica">
  <h2>Pessoa F√≠sica</h2>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>CPF</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Rua</th>
          <th>N√∫mero</th>
          <th>Complemento</th>
          <th>Bairro</th>
          <th>CEP</th>
          <th>Cidade</th>
          <th>UF</th>
          <th>Criado em</th>
          <th>Atualizado em</th>
          <th>Auditoria</th>
        </tr>
      </thead>
      <tbody id="tabela-pessoa-fisica"></tbody>
    </table>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <button class="btn-icone" title="Auditoria" onclick="selecionarBotao('container-pessoa-fisica', this)"><i class="fa-solid fa-magnifying-glass-chart"></i></button>
    <button class="btn-icone" title="Salvar" onclick="selecionarBotao('container-pessoa-fisica', this)"><i class="fa-solid fa-floppy-disk"></i></button>
    <button class="btn-icone" title="Apagar" onclick="selecionarBotao('container-pessoa-fisica', this)"><i class="fa-solid fa-trash"></i></button>
    <button class="btn-icone" title="Desfazer Sele√ß√£o" onclick="selecionarBotao('container-pessoa-fisica', this)"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>

<div class="painel-container" id="container-pessoa-juridica">
  <h2>Pessoa Jur√≠dica</h2>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Raz√£o Social</th>
          <th>CNPJ</th>
          <th>Nome Fantasia</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Celular</th>
          <th>Rua</th>
          <th>N√∫mero</th>
          <th>Complemento</th>
          <th>Bairro</th>
          <th>CEP</th>
          <th>Cidade</th>
          <th>UF</th>
          <th>Criado em</th>
          <th>Atualizado em</th>
          <th>Auditoria</th>
        </tr>
      </thead>
      <tbody id="tabela-pessoa-juridica"></tbody>
    </table>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <button class="btn-icone" title="Auditoria" onclick="selecionarBotao('container-pessoa-juridica', this)"><i class="fa-solid fa-magnifying-glass-chart"></i></button>
    <button class="btn-icone" title="Salvar" onclick="selecionarBotao('container-pessoa-juridica', this)"><i class="fa-solid fa-floppy-disk"></i></button>
    <button class="btn-icone" title="Apagar" onclick="selecionarBotao('container-pessoa-juridica', this)"><i class="fa-solid fa-trash"></i></button>
    <button class="btn-icone" title="Desfazer Sele√ß√£o" onclick="selecionarBotao('container-pessoa-juridica', this)"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>

<div class="painel-container" id="container-elemento-rodoviario">
  <h2>Elemento Rodovi√°rio</h2>
  <div class="tabela-scroll">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>C√≥digo</th>
          <th>Denomina√ß√£o</th>
          <th>Munic√≠pio</th>
          <th>Auditoria</th>
        </tr>
      </thead>
      <tbody id="tabela-elemento-rodoviario"></tbody>
    </table>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <button class="btn-icone" title="Auditoria" onclick="selecionarBotao('container-elemento-rodoviario', this)"><i class="fa-solid fa-magnifying-glass-chart"></i></button>
    <button class="btn-icone" title="Salvar" onclick="selecionarBotao('container-elemento-rodoviario', this)"><i class="fa-solid fa-floppy-disk"></i></button>
    <button class="btn-icone" title="Apagar" onclick="selecionarBotao('container-elemento-rodoviario', this)"><i class="fa-solid fa-trash"></i></button>
    <button class="btn-icone" title="Desfazer Sele√ß√£o" onclick="selecionarBotao('container-elemento-rodoviario', this)"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>
<script>
// L√≥gica de altern√¢ncia independente para grupos de colunas no container de projetos
const gruposProjetosAtivos = {
  geometria: false,
  ca: false,
  ifm: false,
  ifs: false,
  iqi: false
};
const mapaProjetos = {
  'geometria': { cols: [15,16,17], headerId: 'grupo-geometria', btnId: 'btn-grupo-geometria' },
  'ca': { cols: [18,19], headerId: 'grupo-ca', btnId: 'btn-grupo-ca' },
  'ifm': { cols: [20,21,22], headerId: 'grupo-ifm', btnId: 'btn-grupo-ifm' },
  'ifs': { cols: [23,24,25], headerId: 'grupo-ifs', btnId: 'btn-grupo-ifs' },
  'iqi': { cols: [26,27,28], headerId: 'grupo-iqi', btnId: 'btn-grupo-iqi' }
};
function alternarGrupoProjetos(grupo) {
  gruposProjetosAtivos[grupo] = !gruposProjetosAtivos[grupo];
  const { cols, headerId, btnId } = mapaProjetos[grupo];
  // Alterna visual do bot√£o
  const btn = document.getElementById(btnId);
  if (gruposProjetosAtivos[grupo]) {
    btn.classList.add('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-projetos table tr th:nth-child('+(idx+1)+'), #container-projetos table tr td:nth-child('+(idx+1)+')').forEach(el => el.style.display = '');
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = '';
  } else {
    btn.classList.remove('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-projetos table tr th:nth-child('+(idx+1)+'), #container-projetos table tr td:nth-child('+(idx+1)+')').forEach(el => el.style.display = 'none');
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = 'none';
  }
}
document.getElementById('btn-mostrar-tudo-projetos').onclick = function() {
  Object.keys(gruposProjetosAtivos).forEach(g => gruposProjetosAtivos[g] = true);
  document.querySelectorAll('#container-projetos table th, #container-projetos table td').forEach(el => el.style.display = '');
  document.querySelectorAll('#container-projetos .grupo-header').forEach(el => el.style.display = '');
  Object.values(mapaProjetos).forEach(({btnId}) => document.getElementById(btnId).classList.add('selecionado'));
};
function esconderTudoProjetos() {
  Object.keys(gruposProjetosAtivos).forEach(g => gruposProjetosAtivos[g] = false);
  document.querySelectorAll('#container-projetos table th, #container-projetos table td').forEach((el, idx) => {
    if ((el.cellIndex !== undefined && el.cellIndex < 15) || (el.getAttribute('colspan') && el.cellIndex === 0)) {
      el.style.display = '';
    } else {
      el.style.display = 'none';
    }
  });
  document.querySelectorAll('#container-projetos .grupo-header').forEach(el => el.style.display = 'none');
  Object.values(mapaProjetos).forEach(({btnId}) => document.getElementById(btnId).classList.remove('selecionado'));
}
document.getElementById('btn-esconder-tudo-projetos').onclick = esconderTudoProjetos;

// Controle visual dos bot√µes editar, salvar e apagar
function selecionarBotao(containerId, botao) {
  document.querySelectorAll(`#${containerId} .btn-icone[data-grupo-acao]`).forEach(btn => btn.classList.remove('selecionado'));
  botao.classList.add('selecionado');
}

// --- Bot√µes de mostrar/ocultar grupos de colunas para Admins ---
const gruposAdminsAtivos = { profissionais: true, sistema: true };
const mapaAdmins = {
  profissionais: { cols: [6,7,8,9,10,11,12,13,14,15,16,17,18], headerId: 'grupo-profissionais-admins', btnId: 'btn-grupo-profissionais-admins' },
  sistema: { cols: [19,20,21,22,23], headerId: 'grupo-sistema-admins', btnId: 'btn-grupo-sistema-admins' }
};
function alternarGrupoAdmins(grupo) {
  gruposAdminsAtivos[grupo] = !gruposAdminsAtivos[grupo];
  const { cols, headerId, btnId } = mapaAdmins[grupo];
  const btn = document.getElementById(btnId);
  if (gruposAdminsAtivos[grupo]) {
    btn.classList.add('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-admin table tr th:nth-child('+(idx+1)+'), #container-admin table tr td:nth-child('+(idx+1)+')').forEach(el => el.style.display = '');
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = '';
  } else {
    btn.classList.remove('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-admin table tr th:nth-child('+(idx+1)+'), #container-admin table tr td:nth-child('+(idx+1)+')').forEach(el => { el.style.display = 'none'; });
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = 'none';
  }
}
document.getElementById('btn-mostrar-tudo-admins').onclick = function() {
  Object.keys(gruposAdminsAtivos).forEach(g => gruposAdminsAtivos[g] = true);
  document.querySelectorAll('#container-admin table th, #container-admin table td').forEach(el => el.style.display = '');
  document.querySelectorAll('#container-admin .grupo-header').forEach(el => el.style.display = '');
  Object.values(mapaAdmins).forEach(({btnId}) => document.getElementById(btnId).classList.add('selecionado'));
};
document.getElementById('btn-ocultar-tudo-admins').onclick = function() {
  Object.keys(gruposAdminsAtivos).forEach(g => gruposAdminsAtivos[g] = false);
  document.querySelectorAll('#container-admin table th, #container-admin table td').forEach((el, idx) => {
    if (el.cellIndex !== undefined && el.cellIndex < 6) {
      el.style.display = '';
    } else {
      el.style.display = 'none';
    }
  });
  document.querySelectorAll('#container-admin .grupo-header').forEach(el => el.style.display = 'none');
  Object.values(mapaAdmins).forEach(({btnId}) => document.getElementById(btnId).classList.remove('selecionado'));
};
document.getElementById('btn-grupo-profissionais-admins').onclick = function() { alternarGrupoAdmins('profissionais'); };
document.getElementById('btn-grupo-sistema-admins').onclick = function() { alternarGrupoAdmins('sistema'); };
// --- Bot√µes de mostrar/ocultar grupos de colunas para Usu√°rios ---
const gruposUsuariosAtivos = { profissionais: true, sistema: true };
const mapaUsuarios = {
  profissionais: { cols: [6,7,8,9,10,11,12,13,14,15,16,17,18], headerId: 'grupo-profissionais-usuarios', btnId: 'btn-grupo-profissionais-usuarios' },
  sistema: { cols: [19,20,21,22,23], headerId: 'grupo-sistema-usuarios', btnId: 'btn-grupo-sistema-usuarios' }
};
function alternarGrupoUsuarios(grupo) {
  gruposUsuariosAtivos[grupo] = !gruposUsuariosAtivos[grupo];
  const { cols, headerId, btnId } = mapaUsuarios[grupo];
  const btn = document.getElementById(btnId);
  if (gruposUsuariosAtivos[grupo]) {
    btn.classList.add('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-usuarios table tr th:nth-child('+(idx+1)+'), #container-usuarios table tr td:nth-child('+(idx+1)+')').forEach(el => el.style.display = '');
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = '';
  } else {
    btn.classList.remove('selecionado');
    cols.forEach(idx => {
      document.querySelectorAll('#container-usuarios table tr th:nth-child('+(idx+1)+'), #container-usuarios table tr td:nth-child('+(idx+1)+')').forEach(el => { el.style.display = 'none'; });
    });
    const header = document.getElementById(headerId);
    if(header) header.style.display = 'none';
  }
}
document.getElementById('btn-mostrar-tudo-usuarios').onclick = function() {
  Object.keys(gruposUsuariosAtivos).forEach(g => gruposUsuariosAtivos[g] = true);
  document.querySelectorAll('#container-usuarios table th, #container-usuarios table td').forEach(el => el.style.display = '');
  document.querySelectorAll('#container-usuarios .grupo-header').forEach(el => el.style.display = '');
  Object.values(mapaUsuarios).forEach(({btnId}) => document.getElementById(btnId).classList.add('selecionado'));
};
document.getElementById('btn-ocultar-tudo-usuarios').onclick = function() {
  Object.keys(gruposUsuariosAtivos).forEach(g => gruposUsuariosAtivos[g] = false);
  document.querySelectorAll('#container-usuarios table th, #container-usuarios table td').forEach((el, idx) => {
    if (el.cellIndex !== undefined && el.cellIndex < 6) {
      el.style.display = '';
    } else {
      el.style.display = 'none';
    }
  });
  document.querySelectorAll('#container-usuarios .grupo-header').forEach(el => el.style.display = 'none');
  Object.values(mapaUsuarios).forEach(({btnId}) => document.getElementById(btnId).classList.remove('selecionado'));
};
document.getElementById('btn-grupo-profissionais-usuarios').onclick = function() { alternarGrupoUsuarios('profissionais'); };
document.getElementById('btn-grupo-sistema-usuarios').onclick = function() { alternarGrupoUsuarios('sistema'); };

// Carregar Pessoa F√≠sica
fetch("/cadastro/pfs/json")
  .then(res => res.json())
  .then(pfs => {
    const tabelaPF = document.getElementById("tabela-pessoa-fisica");
    tabelaPF.innerHTML = "";
    pfs.forEach(pf => {
      const linha = document.createElement("tr");
      linha.innerHTML = `
        <td>${pf.id}</td>
        <td>${pf.nome || ''}</td>
        <td>${formatarCPF ? formatarCPF(pf.cpf) : pf.cpf || ''}</td>
        <td>${pf.email || ''}</td>
        <td>${formatarTelefone ? formatarTelefone(pf.telefone) : pf.telefone || ''}</td>
        <td>${pf.rua || ''}</td>
        <td>${pf.numero || ''}</td>
        <td>${pf.complemento || ''}</td>
        <td>${pf.bairro || ''}</td>
        <td>${formatarCEP ? formatarCEP(pf.cep) : pf.cep || ''}</td>
        <td>${pf.cidade || ''}</td>
        <td>${pf.uf || ''}</td>
        <td>${formatarDataHora ? formatarDataHora(pf.criado_em) : pf.criado_em || ''}</td>
        <td>${formatarDataHora ? formatarDataHora(pf.atualizado_em) : pf.atualizado_em || ''}</td>
        <td><button class="btn-icone" title="Auditoria" onclick="auditarPessoaFisica(${pf.id})"><i class="fa-solid fa-magnifying-glass-chart"></i></button></td>
      `;
      tabelaPF.appendChild(linha);
    });
  });

// Carregar Pessoa Jur√≠dica
fetch("/cadastro/pjs/json")
  .then(res => res.json())
  .then(pjs => {
    const tabelaPJ = document.getElementById("tabela-pessoa-juridica");
    tabelaPJ.innerHTML = "";
    pjs.forEach(pj => {
      const linha = document.createElement("tr");
      linha.innerHTML = `
        <td>${pj.id}</td>
        <td>${pj.razao_social || ''}</td>
        <td>${formatarCNPJ ? formatarCNPJ(pj.cnpj) : pj.cnpj || ''}</td>
        <td>${pj.nome_fantasia || ''}</td>
        <td>${pj.email || ''}</td>
        <td>${formatarTelefone ? formatarTelefone(pj.telefone) : pj.telefone || ''}</td>
        <td>${formatarTelefone ? formatarTelefone(pj.celular) : pj.celular || ''}</td>
        <td>${pj.rua || ''}</td>
        <td>${pj.numero || ''}</td>
        <td>${pj.complemento || ''}</td>
        <td>${pj.bairro || ''}</td>
        <td>${formatarCEP ? formatarCEP(pj.cep) : pj.cep || ''}</td>
        <td>${pj.cidade || ''}</td>
        <td>${pj.uf || ''}</td>
        <td>${formatarDataHora ? formatarDataHora(pj.criado_em) : pj.criado_em || ''}</td>
        <td>${formatarDataHora ? formatarDataHora(pj.atualizado_em) : pj.atualizado_em || ''}</td>
        <td><button class="btn-icone" title="Auditoria" onclick="auditarPessoaJuridica(${pj.id})"><i class="fa-solid fa-magnifying-glass-chart"></i></button></td>
      `;
      tabelaPJ.appendChild(linha);
    });
  });

// Carregar Elemento Rodovi√°rio
fetch("/cadastro/trechos/json")
  .then(res => res.json())
  .then(trechos => {
    const tabelaTrecho = document.getElementById("tabela-elemento-rodoviario");
    tabelaTrecho.innerHTML = "";
    trechos.forEach(trecho => {
      const linha = document.createElement("tr");
      linha.innerHTML = `
        <td>${trecho.id}</td>
        <td>${trecho.codigo || ''}</td>
        <td>${trecho.denominacao || ''}</td>
        <td>${trecho.municipio || ''}</td>
        <td><button class="btn-icone" title="Auditoria" onclick="auditarTrecho(${trecho.id})"><i class="fa-solid fa-magnifying-glass-chart"></i></button></td>
      `;
      tabelaTrecho.appendChild(linha);
    });
  });

function auditarPessoaFisica(id) {
  alert(`Abrir auditoria da Pessoa F√≠sica ID ${id}`);
}
function auditarPessoaJuridica(id) {
  alert(`Abrir auditoria da Pessoa Jur√≠dica ID ${id}`);
}
function auditarTrecho(id) {
  alert(`Abrir auditoria do Elemento Rodovi√°rio ID ${id}`);
}
  </script></body>
</html>